pipeline {
    agent any

    parameters {
        string(name: "BRANCH_NAME", defaultValue: "master", description: "Branch a ser buildada")
        booleanParam(name: "RUN_MIGRATIONS", defaultValue: false, description: "Executar as migrações de Bd")
    }

    stages {
        stage("Current Branch") {
            steps {
                echo "Building branch $BRANCH_NAME"
            }
        }

        stage("Build") {
            steps {
                echo "Executando build..."
            }
        }

        stage("Flyway") {
            when {
                environment name: "RUN_MIGRATIONS", value: true
            }
            steps {
                echo "Executando migrações de banco de dados..."
            }
        }

        stage("Dockerize") {
            steps {
                echo "Executando containerização..."
            }
        }


    }
}